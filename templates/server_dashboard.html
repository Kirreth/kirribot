<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>{{ guild.name }} Dashboard</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h1>{{ guild.name }} Dashboard</h1>

        <!-- Server Info -->
        <div class="card">
            <p><strong>Prefix:</strong> {{ prefix }}</p>
            <p><strong>Birthday Channel:</strong> {{ birthday_channel or "Nicht gesetzt" }}</p>
            <p><strong>Sanctions Channel:</strong> {{ sanctions_channel or "Nicht gesetzt" }}</p>
        </div>

        <!-- Einstellungen Form -->
        <form action="/server/{{ guild_id }}/update" method="post" class="card">
            <label>Prefix</label>
            <input type="text" name="prefix" value="{{ prefix }}">

            <label>Birthday Channel</label>
            <select name="birthday_channel">
                <option value="">Nicht gesetzt</option>
                {% for channel in text_channels %}
                <option value="{{ channel.id }}" {% if birthday_channel == channel.id|string %}selected{% endif %}>
                    {{ channel.name }}
                </option>
                {% endfor %}
            </select>

            <label>Sanctions Channel</label>
            <select name="sanctions_channel">
                <option value="">Nicht gesetzt</option>
                {% for channel in text_channels %}
                <option value="{{ channel.id }}" {% if sanctions_channel == channel.id|string %}selected{% endif %}>
                    {{ channel.name }}
                </option>
                {% endfor %}
            </select>

            <div class="form-actions">
                <button type="submit">Speichern</button>
            </div>
        </form>

        <!-- Custom Commands -->
        <div class="card">
            <h2>Custom Commands</h2>
            {% for cmd, resp in custom_commands.items() %}
            <div class="command">
                <span><strong>{{ cmd }}</strong>: {{ resp }}</span>
                <form action="/server/{{ guild_id }}/commands/remove" method="post">
                    <input type="hidden" name="command_name" value="{{ cmd }}">
                    <button>Löschen</button>
                </form>
            </div>
            {% endfor %}

            <!-- Add new command -->
            <form action="/server/{{ guild_id }}/commands/add" method="post" class="flex">
                <input type="text" name="command_name" placeholder="Name" class="flex-1">
                <input type="text" name="response" placeholder="Response" class="flex-2">
                <button type="submit">Hinzufügen</button>
            </form>
        </div>
    </div>
</body>
</html>
